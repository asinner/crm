#lightbox{data: {ng_show: 'showLightbox'}}
	.close{data: {ng_click: 'showLightbox = false'}}
		&times;
	#new-lead.centered
		%h3
			Create a new lead
		%form{data: {ng_controller: 'LeadsCtrl', ng_submit: 'create(currentLead)'}}
			.row
				%div.half
					%input{type: 'text', placeholder: 'First name', data: {ng_model: 'currentLead.first_name'}}
				%div.half
					%input{type: 'text', placeholder: 'Last name', data: {ng_model: 'currentLead.last_name'}}
			.row
				%div.half
					%input{type: 'text', placeholder: 'Email', data: {ng_model: 'currentLead.email'}}
				%div.half
					%input.phone-number{type: 'text', placeholder: 'Phone Number', data: {ng_model: "currentLead.phone_number"}}
			%button{type: 'submit'}
				Create Lead

#dashboard-main-bar
	.name
		Signed in as {{currentUser.name}}
	.new-lead
		%a{data: {ng_click: 'showLightbox = true'}}
			+ New Lead
						
#dashboard-menu{data: {ng_controller: 'LeadListCtrl'}}
	%input.centered{type: 'search', data: {ng_model: 'query'}, placeholder: 'Search your leads'}
	.lead{data: {ng_repeat: 'lead in leads | filter:search'}}
		%a{data: {ng_class: "{ 'active': activeLead == lead.id }", ng_click: 'viewLead(lead)'}}
			{{lead.first_name}} {{lead.last_name}}

#dashboard-view
	%div{data: {ng_controller: 'ViewLeadCtrl'}}
		#lead-view-menu
			%ul
				%li{data: {ng_class: "{'active': activeTab == 'info'}", ng_click: 'viewTab("info")'}} Info
				%li{data: {ng_class: "{'active': activeTab == 'notes'}", ng_click: 'viewTab("notes")'}} Notes
				%li{data: {ng_class: "{'active': activeTab == 'estimate'}", ng_click: 'viewTab("estimate")'}} Estimate
				%li{data: {ng_class: "{'active': activeTab == 'expense-report'}", ng_click: 'viewTab("expense-report")'}} Expense Report
				%li{data: {ng_class: "{'active': activeTab == 'order'}", ng_click: 'viewTab("order")'}} Order
		.tab-view
			%div{data: {ng_show: 'activeTab == "info"'}}
				.heading
					Personal Info
				.name
					{{ currentLead.first_name }} {{currentLead.last_name}}
				.email
					{{ currentLead.email }}
				.phone_number
					{{ currentLead.phone_number }}
			%div{data: {ng_show: 'activeTab == "notes"'}}
				.heading
					Notes
				%form#new_note{name: 'new-lead-note', data: {ng_controller: 'NewLeadNoteCtrl', ng_submit: 'create(currentNote)'}}
					%input{placeholder: 'Leave a note about this lead', name: 'body', type: 'text', data: {ng_model: 'currentNote.body'}}
				.notes{data: {ng_controller: 'ListLeadNotesCtrl'}}
					.note{data: {ng_repeat: "note in notes | orderBy:'-created_at'"}}
						%span.date {{ note.created_at | date: 'MMM dd, yy' }}
						%span.body {{ note.body }}
			%div{data: {ng_show: 'activeTab == "estimate"'}}
				.heading
					Estimate
				.products{data: {ng_controller: 'ConnectProductsToEstimateCtrl'}}
					%p
						Add your products & services to this estimate
					.product{data: {ng_repeat: 'product in products'}}
						{{ product.name }} {{ product.price | currency }}
			%div{data: {ng_show: 'activeTab == "expense-report"'}}
				.heading
					Expense Report
			%div{data: {ng_show: 'activeTab == "order"'}}
				.heading
					Order
		